<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Jura Prüfung Auswertung</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; background: #f4f4f4; }
    .admin-box { background: white; padding: 2rem; border-radius: 10px; max-width: 900px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    th { background: #007BFF; color: white; }
    #login-section { text-align: center; margin-bottom: 2rem; }
    input[type="password"] { padding: 0.5rem; margin-right: 0.5rem; }
    button { padding: 0.5rem 1rem; border: none; background: #007BFF; color: white; border-radius: 5px; cursor: pointer; }
    button:hover { background: #0056b3; }
    #data-section { display: none; }
  </style>
</head>
<body>
  <div class="admin-box">
    <h1>Jura Prüfung Auswertung</h1>

    <div id="login-section">
      <input type="password" id="adminPass" placeholder="Admin Passwort">
      <button onclick="checkLogin()">Login</button>
    </div>

    <div id="data-section">
      <table>
        <thead>
          <tr>
            <th>Zeit</th>
            <th>Name</th>
            <th>ID</th>
            <th>Punkte</th>
            <th>Antworten</th>
          </tr>
        </thead>
        <tbody id="results-body"></tbody>
      </table>
    </div>
  </div>

  <script>
    const scriptURL = "https://docs.google.com/spreadsheets/d/1yqVmtMpbtI4dEGSSqPvZ4J8WOVXncvEjjj7NgqDIzZ4/gviz/tq?tqx=out:json&sheet=JuraPrüfung";
    const adminPassword = "tdfibfibtd"; // <-- Passwort hier festlegen

    function checkLogin() {
      const input = document.getElementById("adminPass").value;
      if (input === adminPassword) {
        document.getElementById("login-section").style.display = "none";
        document.getElementById("data-section").style.display = "block";
        loadData();
      } else {
        alert("Falsches Passwort!");
      }
    }

    function loadData() {
      fetch(scriptURL)
        .then(res => res.text())
        .then(text => JSON.parse(text.substring(47).slice(0, -2)))
        .then(json => {
          const table = document.getElementById("results-body");
          table.innerHTML = "";
          json.table.rows.forEach(row => {
            const tr = document.createElement("tr");
            row.c.forEach(cell => {
              const td = document.createElement("td");
              td.textContent = cell ? cell.v : "";
              tr.appendChild(td);
            });
            table.appendChild(tr);
          });
        })
        .catch(err => console.error("Fehler beim Laden der Tabelle:", err));
    }
  </script>
</body>
</html>
